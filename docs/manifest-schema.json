{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "http://t4eq.github.io/schemas/vds-manifest.json",
    "title": "VDS Manifest",
    "description": "Describes data to be cached by the VDS",
    "$defs": {
        "Section": {
            "description": "A grouping of videos who belong to the same topic.",
            "type": "object",
            "properties": {
                "name": {
                    "type": "string",
                    "description": "The name of the section."
                },
                "content": {
                    "type": "array",
                    "description": "Ordered list of videos belonging to the same section.",
                    "items": {
                        "$ref": "#/$defs/Video"
                    }
                }
            },
            "required": ["name", "content"]
        },
        "Video": {
            "description": "A single video lesson.",
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Unique identifier of the lesson."
                },
                "name": {
                    "type": "string",
                    "description": "The name of the video to be shown in the user interface."
                },
                "uri": {
                    "type": "string",
                    "format": "uri-reference",
                    "description": "A unique resource identifier reference where the MP4 resource can be found."
                },
                "sha256": {
                    "type": "string",
                    "description": "The SHA-256 hash of the video file."
                }
            },
            "required": ["id", "name", "uri"]
        }
    },

    "type": "object",
    "properties": {
        "name": {
            "description": "The name of the current content distribution schema. e.g.: \"High School distribution list\".",
            "type": "string"
        },
        "version": {
            "description": "The version of the manifest file. Different versions use different schemas.",
            "type": "string",
            "pattern": "v[0-9]+\\.[0-9]+\\.[0-9]+"
        },
        "date": {
            "description": "Date of deployment of the manifest.",
            "type": "string",
            "format": "date"
        },
        "sections": {
            "description": "All of the individual lesson sections that make up the complete manifest.",
            "type": "array",
            "items": {
                "$ref": "#/$defs/Section"
            },
            "uniqueItems": true
        }
    },
    "required": ["name", "sections", "date"]
}
